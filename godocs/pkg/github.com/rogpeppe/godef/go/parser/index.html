<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>parser - The Go Programming Language</title>

<link type="text/css" rel="stylesheet" href="../../../../../../lib/godoc/style.css">

<link rel="stylesheet" href="../../../../../../lib/godoc/jquery.treeview.css">
<script type="text/javascript">window.initFuncs = [];</script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="http://localhost:8081/">The Go Programming Language</a></div>
<div class="top-heading" id="heading-narrow"><a href="http://localhost:8081/">Go</a></div>
<a href="index.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:8081/search">
<div id="menu">
<a href="http://localhost:8081/doc/">Documents</a>
<a href="../../../../../index.html">Packages</a>
<a href="http://localhost:8081/project/">The Project</a>
<a href="http://localhost:8081/help/">Help</a>

<a href="http://localhost:8081/blog/">Blog</a>


<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package parser
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script type='text/javascript'>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/rogpeppe/godef/go/parser"</code></dd>
			</dl>
			<dl>
			<dd><a href="index.html#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="index.html#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
A parser for Go source files. Input may be provided in a variety of
forms (see the various Parse* functions); the output is an abstract
syntax tree (AST) representing the Go source. The parser is invoked
through one of the Parse* functions.
</p>

			</div>
		</div>
		

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="index.html#pkg-constants">Constants</a></dd>
			
			
				<dd><a href="index.html#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="index.html#ParseDeclList">func ParseDeclList(fset *token.FileSet, filename string, src interface{}, scope *ast.Scope, pathToName ImportPathToName) ([]ast.Decl, error)</a></dd>
			
				
				<dd><a href="index.html#ParseDir">func ParseDir(fset *token.FileSet, path string, filter func(os.FileInfo) bool, mode uint, pathToName ImportPathToName) (map[string]*ast.Package, error)</a></dd>
			
				
				<dd><a href="index.html#ParseExpr">func ParseExpr(fset *token.FileSet, filename string, src interface{}, scope *ast.Scope, pathToName ImportPathToName) (ast.Expr, error)</a></dd>
			
				
				<dd><a href="index.html#ParseFile">func ParseFile(fset *token.FileSet, filename string, src interface{}, mode uint, pkgScope *ast.Scope, pathToName ImportPathToName) (*ast.File, error)</a></dd>
			
				
				<dd><a href="index.html#ParseFiles">func ParseFiles(fset *token.FileSet, filenames []string, mode uint, pathToName ImportPathToName) (pkgs map[string]*ast.Package, first error)</a></dd>
			
				
				<dd><a href="index.html#ParseStmtList">func ParseStmtList(fset *token.FileSet, filename string, src interface{}, scope *ast.Scope, pathToName ImportPathToName) ([]ast.Stmt, error)</a></dd>
			
			
				
				<dd><a href="index.html#ImportPathToName">type ImportPathToName</a></dd>
				
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go">interface.go</a>
			
				<a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/parser.go">parser.go</a>
			
				<a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/universe.go">universe.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		<div id="pkg-callgraph" class="toggle" style="display: none">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Internal Call Graph section">Internal call graph ▹</h2>
		</div> <!-- .expanded -->
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Internal Call Graph section">Internal call graph ▾</h2>
			<p>
			  In the call graph viewer below, each node
			  is a function belonging to this package
			  and its children are the functions it
			  calls&mdash;perhaps dynamically.
			</p>
			<p>
			  The root nodes are the entry points of the
			  package: functions that may be called from
			  outside the package.
			  There may be non-exported or anonymous
			  functions among them if they are called
			  dynamically from another package.
			</p>
			<p>
			  Click a node to visit that function's source code.
			  From there you can visit its callers by
			  clicking its declaring <code>func</code>
			  token.
			</p>
			<p>
			  Functions may be omitted if they were
			  determined to be unreachable in the
			  particular programs or tests that were
			  analyzed.
			</p>
			<!-- Zero means show all package entry points. -->
			<ul style="margin-left: 0.5in" id="callgraph-0" class="treeview"></ul>
		</div>
		</div> <!-- #pkg-callgraph -->

		
			<h2 id="pkg-constants">Constants</h2>
			
				<p>
The mode parameter to the Parse* functions is a set of flags (or 0).
They control the amount of source code parsed and other optional
parser functionality.
</p>

				<pre>const (
    <span id="PackageClauseOnly">PackageClauseOnly</span> <a href="http://localhost:8081/pkg/builtin/#uint">uint</a> = 1 &lt;&lt; <a href="http://localhost:8081/pkg/builtin/#iota">iota</a> <span class="comment">// parsing stops after package clause</span>
    <span id="ImportsOnly">ImportsOnly</span>                        <span class="comment">// parsing stops after import declarations</span>
    <span id="ParseComments">ParseComments</span>                      <span class="comment">// parse comments and add them to AST</span>
    <span id="Trace">Trace</span>                              <span class="comment">// print a trace of parsed productions</span>
    <span id="DeclarationErrors">DeclarationErrors</span>                  <span class="comment">// report declaration errors.</span>
)</pre>
			
		
		
			<h2 id="pkg-variables">Variables</h2>
			
				
				<pre>var <span id="Universe">Universe</span> = <a href="../ast/index.html">ast</a>.<a href="../ast/index.html#NewScope">NewScope</a>(<a href="http://localhost:8081/pkg/builtin/#nil">nil</a>)</pre>
			
		
		
			
			
			<h2 id="ParseDeclList">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=3341:3481#L101">ParseDeclList</a>
				<a class="permalink" href="index.html#ParseDeclList">&#xb6;</a>
			</h2>
			<pre>func ParseDeclList(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, filename <a href="http://localhost:8081/pkg/builtin/#string">string</a>, src interface{}, scope *<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Scope">Scope</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) ([]<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Decl">Decl</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseDeclList parses a list of Go declarations and returns the list
of corresponding AST nodes. The fset, filename, and src arguments have the same
interpretation as for ParseFile. If there is an error, the node
list may be nil or contain partial ASTs.
</p>
<p>
If scope is non-nil, it will be used for declarations.
</p>

			
			

		
			
			
			<h2 id="ParseDir">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=7279:7430#L202">ParseDir</a>
				<a class="permalink" href="index.html#ParseDir">&#xb6;</a>
			</h2>
			<pre>func ParseDir(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, path <a href="http://localhost:8081/pkg/builtin/#string">string</a>, filter func(<a href="http://localhost:8081/pkg/os/">os</a>.<a href="http://localhost:8081/pkg/os/#FileInfo">FileInfo</a>) <a href="http://localhost:8081/pkg/builtin/#bool">bool</a>, mode <a href="http://localhost:8081/pkg/builtin/#uint">uint</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) (map[<a href="http://localhost:8081/pkg/builtin/#string">string</a>]*<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Package">Package</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseDir calls ParseFile for the files in the directory specified by path and
returns a map of package name -&gt; package AST with all the packages found. If
filter != nil, only the files with os.FileInfo entries passing through the filter
are considered. The mode bits are passed to ParseFile unchanged. Position
information is recorded in the file set fset.
</p>
<p>
If the directory couldn&#39;t be read, a nil map and the respective error are
returned. If a parse error occurred, a non-nil but incomplete map and the
error are returned.
</p>

			
			

		
			
			
			<h2 id="ParseExpr">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=1913:2047#L61">ParseExpr</a>
				<a class="permalink" href="index.html#ParseExpr">&#xb6;</a>
			</h2>
			<pre>func ParseExpr(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, filename <a href="http://localhost:8081/pkg/builtin/#string">string</a>, src interface{}, scope *<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Scope">Scope</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) (<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Expr">Expr</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseExpr parses a Go expression and returns the corresponding
AST node. The fset, filename, and src arguments have the same interpretation
as for ParseFile. If there is an error, the result expression
may be nil or contain a partial AST.
</p>
<p>
if scope is non-nil, it will be used as the scope for the expression.
</p>

			
			

		
			
			
			<h2 id="ParseFile">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=4743:4892#L134">ParseFile</a>
				<a class="permalink" href="index.html#ParseFile">&#xb6;</a>
			</h2>
			<pre>func ParseFile(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, filename <a href="http://localhost:8081/pkg/builtin/#string">string</a>, src interface{}, mode <a href="http://localhost:8081/pkg/builtin/#uint">uint</a>, pkgScope *<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Scope">Scope</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) (*<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#File">File</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseFile parses the source code of a single Go source file and returns
the corresponding ast.File node. The source code may be provided via
the filename of the source file, or via the src parameter.
</p>
<p>
If src != nil, ParseFile parses the source from src and the filename is
only used when recording position information. The type of the argument
for the src parameter must be string, []byte, or io.Reader.
</p>
<p>
If src == nil, ParseFile parses the file specified by filename.
</p>
<p>
The mode parameter controls the amount of source text parsed and other
optional parser functionality. Position information is recorded in the
file set fset.
</p>
<p>
If the source couldn&#39;t be read, the returned AST is nil and the error
indicates the specific failure. If the source was read but syntax
errors were found, the result is a partial AST (with ast.BadX nodes
representing the fragments of erroneous source code). Multiple errors
are returned via a scanner.ErrorList which is sorted by file position.
</p>

			
			

		
			
			
			<h2 id="ParseFiles">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=6375:6515#L182">ParseFiles</a>
				<a class="permalink" href="index.html#ParseFiles">&#xb6;</a>
			</h2>
			<pre>func ParseFiles(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, filenames []<a href="http://localhost:8081/pkg/builtin/#string">string</a>, mode <a href="http://localhost:8081/pkg/builtin/#uint">uint</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) (pkgs map[<a href="http://localhost:8081/pkg/builtin/#string">string</a>]*<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Package">Package</a>, first <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseFiles calls ParseFile for each file in the filenames list and returns
a map of package name -&gt; package AST with all the packages found. The mode
bits are passed to ParseFile unchanged. Position information is recorded
in the file set fset.
</p>
<p>
Files with parse errors are ignored. In this case the map of packages may
be incomplete (missing packages and/or incomplete packages) and the first
error encountered is returned.
</p>

			
			

		
			
			
			<h2 id="ParseStmtList">func <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=2681:2821#L83">ParseStmtList</a>
				<a class="permalink" href="index.html#ParseStmtList">&#xb6;</a>
			</h2>
			<pre>func ParseStmtList(fset *<a href="../token/index.html">token</a>.<a href="../token/index.html#FileSet">FileSet</a>, filename <a href="http://localhost:8081/pkg/builtin/#string">string</a>, src interface{}, scope *<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Scope">Scope</a>, pathToName <a href="index.html#ImportPathToName">ImportPathToName</a>) ([]<a href="../ast/index.html">ast</a>.<a href="../ast/index.html#Stmt">Stmt</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>
			<p>
ParseStmtList parses a list of Go statements and returns the list
of corresponding AST nodes. The fset, filename, and src arguments have the same
interpretation as for ParseFile. If there is an error, the node
list may be nil or contain partial ASTs.
</p>
<p>
if scope is non-nil, it will be used as the scope for the statements.
</p>

			
			

		
		
			
			
			<h2 id="ImportPathToName">type <a href="http://localhost:8081/src/github.com/rogpeppe/godef/go/parser/interface.go?s=659:730#L16">ImportPathToName</a>
				<a class="permalink" href="index.html#ImportPathToName">&#xb6;</a>
			</h2>
			<p>
ImportPathToName is the type of the function that&#39;s used
to find the package name for an imported package path.
The fromDir argument holds the directory that contains the
import statement, which may be empty.
</p>

			<pre>type ImportPathToName func(path <a href="http://localhost:8081/pkg/builtin/#string">string</a>, fromDir <a href="http://localhost:8081/pkg/builtin/#string">string</a>) (<a href="http://localhost:8081/pkg/builtin/#string">string</a>, <a href="http://localhost:8081/pkg/builtin/#error">error</a>)</pre>

			

			

			
			
			

			

			
		
	

	







<div id="footer">
Build version go1.8.3.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:8081/LICENSE">BSD license</a>.<br>
<a href="http://localhost:8081/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->

<!-- TODO(adonovan): load these from <head> using "defer" attribute? -->
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.js"></script>
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.treeview.js"></script>
<script type="text/javascript" src="../../../../../../lib/godoc/jquery.treeview.edit.js"></script>


<script>var goVersion = "go1.8.3";</script>
<script type="text/javascript" src="../../../../../../lib/godoc/godocs.js"></script>

</body>
</html>

